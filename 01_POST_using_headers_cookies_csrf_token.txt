import requests
from bs4 import BeautifulSoup

# Set up the initial request to get the page content and CSRF token
url = 'https://example.com/login'
response = requests.get(url)

# Extract the CSRF token from the response content
soup = BeautifulSoup(response.content, 'html.parser')
csrf_token = soup.find('input', {'name': 'csrf_token'})['value']

# Set up the headers and cookies with the CSRF token for the new request
headers = {
    'Content-Type': 'application/json',
    'User-Agent': 'Mozilla/5.0',
    'Referer': url,
    'X-XSS-Protection': '1; mode=block',
    'X-Frame-Options': 'SAMEORIGIN',
    'Strict-Transport-Security': 'max-age=31536000; includeSubDomains; preload'
}
cookies = {
    'session_id': 'abc123',
    'csrftoken': csrf_token
}
data = {'username': 'user123', 'password': 'password123'}

# Send the POST request with headers, cookies, and data
response = requests.post(url, headers=headers, cookies=cookies, data=data)

if response.status_code == 200:
    print('POST request successful')
    print(response.text)
else:
    print(f'POST request failed with status code: {response.status_code}')
